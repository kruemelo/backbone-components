<backbone-component name="TestView">

	<!-- 
	you may load additional scripts:

	<script src="additional-script.js"></script> 
	-->

	<!-- optional: some css -->
	<style type="text/css-template">

	.test-view>h1 {
		color: red;
	}

	</style>


	<!-- optional: html templates -->
	<script type="text/html-template">

		<!-- script tags are not allowed here!
			<script type="text/javascript">
				console.log('foo');
			</script>
	 	-->

 		<template id="test">

 			<div class="test-view">

				<button class="btn-clickme">clickme</button>
				
				<h1>says <%-say %> </h1> 			

				<ul class="answers"></ul>

			</div>

 		</template>
	</script>


	<!-- mandatory: backbone view definition -->
	<script type="text/javascript">

		// load dependencies 
		BackboneComponents.import('sub-test-view.html')
			.then(function () {

				// dependency `SubTestView` will be available in TestView, but may not yet be at this point
				// console.log(SubTestView);

				// define backbone view
				var TestView = 	BackboneComponents.extend({

				  events: {
				    'click .btn-clickme': 'buttonClicked'
				  },


				  buttonClicked: function () {

				  	var subTestView = new SubTestView(),
				  		newLi = document.createElement('li');

				  	this.$('.answers').append(newLi);

				  	subTestView.setElement(newLi);

				  	subTestView.render();
				  	
				  },


				  initialize: function () {

				  	// BackboneComponents.BaseView.prototype.initialize.apply(this, arguments);
				  	this.super.prototype.initialize.apply(this, arguments);
				  },


				  render: function () {

				    this.$el.html(
			    		TestView.templates.test.render({say: 'hi!'})
			    	);

			    	return this;
				  }
				});

				// register view
				BackboneComponents.register('TestView', TestView);

			})
			.catch(function (reason) {
				console.error(reason);
			});

	</script>

</backbone-component>